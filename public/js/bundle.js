var U=class{routes=[];add(t,s){let n=t.replace(/:(\w+)/g,"(?<$1>[^/]+)");this.routes.push({pattern:new RegExp(`^${n}$`),handler:s})}start(){window.addEventListener("hashchange",()=>this.resolve()),this.resolve()}navigate(t){location.hash=t}resolve(){let t=location.hash.slice(1)||"/";for(let s of this.routes){let n=t.match(s.pattern);if(n){s.handler(n.groups??{});return}}this.routes.length>0&&this.routes[0].handler({})}};var H=class{state={connected:!1,gameState:null,agents:[],selectedAgentIds:new Set,route:location.hash||"#/"};listeners=new Set;getState(){return this.state}update(t){this.state={...this.state,...t},this.notify()}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(){for(let t of this.listeners)t()}},f=new H;function e(a,t={},...s){let n=document.createElement(a);for(let[i,l]of Object.entries(t))i.startsWith("data-")?n.setAttribute(i,l):i==="class"?n.className=l:i==="for"?n.setAttribute("for",l):n.setAttribute(i,l);for(let i of s)n.append(typeof i=="string"?document.createTextNode(i):i);return n}function g(a,...t){a.replaceChildren(...t)}function W(a,t){let s=e("div",{class:"hero-logo"},e("span",{class:"logo-soul-left"},"SOUL"),e("span",{class:"logo-vs"}," vs "),e("span",{class:"logo-soul-right"},"SOUL")),n=e("p",{class:"hero-tagline"},"Upload your soul. Fight to win."),i=e("button",{class:"btn btn-cta",type:"button","aria-label":"Choose your fighter"},"Choose Your Fighter \u2192");i.addEventListener("click",t);let l=e("div",{class:"hero-preview"},e("div",{class:"preview-tile"},e("span",{class:"preview-emoji"},"\u{1F9E0}"),e("span",{class:"preview-vs"},"vs"),e("span",{class:"preview-emoji"},"\u{1F525}"))),d=e("section",{class:"landing-hero"},s,n,i,l);g(a,d)}function N(a,t="Loading\u2026"){let s=e("div",{class:"loading-spinner",role:"status","aria-label":t},e("div",{class:"spinner-ring"}),e("p",{class:"loading-text"},t));g(a,s)}function P(a,t,s){let n=[e("div",{class:"error-icon"},"\u26A0\uFE0F"),e("h2",{class:"error-title"},"Something went wrong"),e("p",{class:"error-message",role:"alert"},t)];if(s){let l=e("button",{class:"btn btn-primary",type:"button","aria-label":"Retry"},"\u{1F504} Try Again");l.addEventListener("click",s),n.push(l)}let i=e("section",{class:"error-state"},...n);g(a,i)}var pe="/api/v1";async function A(a,t={}){let s=await fetch(`${pe}${a}`,{headers:{"Content-Type":"application/json",...t.headers},credentials:"include",...t});if(!s.ok){let n=await s.json().catch(()=>({error:"UNKNOWN",message:s.statusText}));throw new F(n.error??"UNKNOWN",n.message??s.statusText,s.status)}return s.json()}var F=class extends Error{constructor(s,n,i){super(n);this.code=s;this.status=i;this.name="ApiError"}};function J(){return A("/agents")}function q(a){return A(`/games/${encodeURIComponent(a)}`)}function z(a,t="elimination"){return A("/games",{method:"POST",body:JSON.stringify({agents:a,mode:t})})}function Y(a){return A(`/games/${encodeURIComponent(a)}/start`,{method:"POST"})}function V(a){return A(`/games/${encodeURIComponent(a)}/results`)}function K(a){return A(`/games/${encodeURIComponent(a)}/replay`)}function X(a=20,t=0){return A(`/leaderboard?limit=${a}&offset=${t}`)}function Q(a){return A(`/users/${encodeURIComponent(a)}`)}function Z(a){let t=new URLSearchParams;return a.search&&t.set("search",a.search),a.sort&&t.set("sort",a.sort),a.preset&&t.set("preset",a.preset),a.limit&&t.set("limit",String(a.limit)),a.offset&&t.set("offset",String(a.offset)),A(`/agents?${t.toString()}`)}function ee(a){let t=new URLSearchParams;return a.status&&t.set("status",a.status),a.sort&&t.set("sort",a.sort),a.limit&&t.set("limit",String(a.limit)),a.offset&&t.set("offset",String(a.offset)),A(`/games?${t.toString()}`)}function te(a){let t=new Set,s=[],n=!0,i=null;function l(){if(n){N(a,"Loading fighters\u2026");return}if(i){P(a,i,()=>void m());return}let p=e("header",{class:"picker-header"},e("h1",{},"\u2694\uFE0F Choose Your Fighters"),e("p",{},"Select 2 or more agents to battle")),o=e("div",{class:"agent-grid",role:"group","aria-label":"Agent selection"});for(let u of s){let v=e("button",{class:`agent-tile${t.has(u.id)?" selected":""}`,"aria-pressed":t.has(u.id)?"true":"false","aria-label":`Select ${u.name}`,"data-id":u.id,type:"button"},e("div",{class:"emoji"},"\u{1F916}"),e("div",{class:"name"},u.name),e("div",{class:"desc"},u.personality??""));v.addEventListener("click",()=>d(u.id)),o.append(v)}let c=e("button",{class:"btn btn-primary",type:"button","aria-label":"Start game"},"\u{1F3AE} Start Game");t.size<2&&c.setAttribute("disabled",""),c.addEventListener("click",()=>void h());let r=e("div",{class:"picker-actions"},c);g(a,p,o,r)}function d(p){t.has(p)?t.delete(p):t.add(p),f.update({selectedAgentIds:new Set(t)}),l()}async function h(){if(!(t.size<2))try{N(a,"Creating game\u2026");let p=await z([...t]);await Y(p.id),location.hash=`#/game/${p.id}`}catch(p){P(a,p instanceof Error?p.message:"Failed to create game",()=>l())}}async function m(){n=!0,i=null,l();try{let p=await J();s=Array.isArray(p)?p:p.agents,n=!1}catch(p){n=!1,i=p instanceof Error?p.message:"Failed to load agents"}l()}m()}var B=class{ws=null;reconnectAttempts=0;maxReconnectAttempts=10;gameId=null;reconnectTimer=null;onFullState;onRoundStart;onChallenge;onResponse;onElimination;onGameEnd;onError;onDisconnected;onConnectionChange;connect(t){this.gameId=t,this.reconnectAttempts=0,this.doConnect()}disconnect(){this.gameId=null,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null)}doConnect(){if(!this.gameId)return;let s=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws`;this.ws=new WebSocket(s),this.ws.onopen=()=>{this.reconnectAttempts=0,this.onConnectionChange?.(!0),this.ws.send(JSON.stringify({type:"SUBSCRIBE",gameId:this.gameId})),this.ws.send(JSON.stringify({type:"RESYNC",gameId:this.gameId}))},this.ws.onmessage=n=>{try{let i=JSON.parse(n.data);this.handleMessage(i)}catch{}},this.ws.onclose=n=>{this.onConnectionChange?.(!1),!(n.code===1e3||n.code===1001)&&this.scheduleReconnect()},this.ws.onerror=()=>{this.ws?.close()}}scheduleReconnect(){if(!this.gameId)return;if(this.reconnectAttempts>=this.maxReconnectAttempts){this.onDisconnected?.("Max reconnection attempts reached");return}let t=Math.min(1e3*2**this.reconnectAttempts,3e4);this.reconnectAttempts++,this.reconnectTimer=setTimeout(()=>this.doConnect(),t)}handleMessage(t){switch(t.type){case"FULL_STATE":this.onFullState?.(t.data);break;case"ROUND_START":this.onRoundStart?.(t.data);break;case"CHALLENGE":this.onChallenge?.(t.data);break;case"RESPONSE":this.onResponse?.(t.data);break;case"ELIMINATION":this.onElimination?.(t.data);break;case"GAME_END":this.onGameEnd?.(t.data);break;case"ERROR":this.onError?.(t.data);break}}};function O(a){let t=!1;function s(){let l=[...f.getState().gameState?.agents??[]].sort((o,c)=>c.score-o.score),d=e("aside",{class:`scoreboard${t?" collapsed":""}`,"aria-label":"Scoreboard"}),h=e("button",{class:"scoreboard-toggle",type:"button","aria-label":t?"Expand scoreboard":"Collapse scoreboard"},t?"\u25B6":"\u25BC");h.addEventListener("click",()=>{t=!t,s()});let m=e("div",{class:"scoreboard-header"},e("h2",{},"\u{1F3C6} Scores"),h);d.append(m);let p=e("div",{class:"scoreboard-list",role:"list"});l.forEach((o,c)=>{let r=e("div",{class:`scoreboard-entry${o.eliminated?" eliminated":""}`,role:"listitem","aria-label":`${o.name}: ${o.score} points${o.eliminated?", eliminated":""}`},e("span",{class:"rank"},`${c+1}.`),e("span",{class:"agent-emoji"},o.avatar??"\u{1F916}"),e("span",{class:"agent-info"},e("span",{class:"agent-name"},o.name)),e("span",{class:"score"},String(o.score)));p.append(r)}),d.append(p),g(a,d)}f.subscribe(s),s()}function ge(a){return a.replace(/<[^>]*>/g,"")}function D(a,t=500){let s=ge(a);return s.length>t?s.slice(0,t)+"\u2026":s}var ue={debate:"\u{1F5E3}\uFE0F",strategy:"\u265F\uFE0F",creative:"\u{1F3A8}",trivia:"\u{1F4DA}"};function ne(a,t){let s=[],n=e("article",{class:"challenge-display"},e("div",{class:"challenge-type"},`${ue[t.type]??"\u2753"} ${t.type}`),e("p",{class:"challenge-description"},D(t.description)));if(s.push(n),t.responses&&t.responses.length>0){let i=e("div",{class:"response-list","aria-label":"Agent responses",role:"list"});for(let l of t.responses){let d=e("article",{class:"response-card",role:"listitem"},e("div",{class:"agent-name"},l.agentDisplayId),e("p",{class:"response-text"},D(l.response)),e("div",{class:"response-score"},`Score: ${l.score}`));i.append(d)}s.push(i)}g(a,...s)}function se(a,t,s,n){let l=`https://soulvssoul.com/game/${encodeURIComponent(n)}`,d=`\u{1F3C6} ${t} just dominated in Soul vs Soul! ${s} points | Watch the next battle \u2192`,h=`https://twitter.com/intent/tweet?text=${encodeURIComponent(d)}&url=${encodeURIComponent(l)}`,m=e("span",{class:"x-logo","aria-hidden":"true"},"\u{1D54F}"),p=e("a",{class:"btn btn-share",href:h,target:"_blank",rel:"noopener noreferrer","aria-label":"Share results on X"},m," Share to X"),o=e("button",{class:"btn btn-secondary",type:"button","aria-label":"Copy game link"},"\u{1F517} Copy Link");o.addEventListener("click",()=>{let r=`${location.origin}/#/game/${encodeURIComponent(n)}`;navigator.clipboard.writeText(r).then(()=>{o.textContent="\u2705 Copied!",setTimeout(()=>{o.textContent="\u{1F517} Copy Link"},2e3)})});let c=e("section",{class:"share-card"},e("h3",{},"Share Your Victory"),e("p",{class:"share-text"},`${t} dominated with ${s} points!`),e("div",{class:"share-actions"},p,o));g(a,c)}function ae(a,t){let s=new B,n=null,i=!1,l="",d=0,h=e("div",{class:"game-layout"}),m=e("div",{class:"game-arena"}),p=e("div",{});h.append(m,p),g(a,h),O(p),s.onFullState=r=>{n=r,f.update({gameState:r,agents:r.agents}),o()},s.onRoundStart=r=>{n&&(n.round=r.round,f.update({gameState:{...n}})),o()},s.onChallenge=r=>{n&&(n.currentChallenge={type:r.challenge.type,description:r.challenge.publicDescription,responses:[]},f.update({gameState:{...n}})),o()},s.onResponse=r=>{if(n?.currentChallenge){n.currentChallenge.responses||(n.currentChallenge.responses=[]),n.currentChallenge.responses.push({agentDisplayId:r.agentId,response:D(r.response),score:r.score});let u=n.agents.find(v=>v.displayId===r.agentId);u&&(u.score+=r.score),f.update({gameState:{...n}})}o()},s.onElimination=r=>{if(n){let u=n.agents.find(v=>v.displayId===r.agentId);u&&(u.eliminated=!0),f.update({gameState:{...n}})}o()},s.onGameEnd=r=>{i=!0,l=r.winner.name,d=r.winner.score,o()},s.onConnectionChange=r=>{f.update({connected:r});let u=document.getElementById("connection-status");u&&(u.textContent=r?"\u{1F7E2} Live":"\u{1F534} Reconnecting\u2026",u.className=`connection-status ${r?"connected":"disconnected"}`)},s.onError=r=>{let u=e("p",{class:"error",role:"alert"},`Error: ${r.message}`);m.append(u)},s.onDisconnected=r=>{let u=e("p",{class:"error",role:"alert"},`Disconnected: ${r}`);m.append(u)};function o(){let r=[];if(i){let v=e("section",{class:"game-end"},e("h2",{},"\u{1F3C6} Game Over!"),e("p",{class:"winner-name"},l),e("p",{},`Score: ${d}`));r.push(v);let w=e("div",{});r.push(w),g(m,...r),se(w,l,d,t);return}if(!n){r.push(e("p",{},"Connecting to game\u2026")),g(m,...r);return}let u=e("header",{class:"arena-header"},e("span",{class:"round-indicator"},`Round ${n.round}`),e("span",{class:"spectator-count","aria-label":"Spectator count"},`\u{1F441} ${n.spectatorCount}`));if(r.push(u),n.currentChallenge){let v=e("div",{});r.push(v),g(m,...r),ne(v,n.currentChallenge);return}r.push(e("p",{class:"waiting"},"Waiting for next challenge\u2026")),g(m,...r)}s.connect(t);let c=f.subscribe(()=>{f.getState().route.includes(t)||(s.disconnect(),c())})}function re(a,t){let s=[],n=0,i=!1,l=1,d=null,h=e("div",{class:"game-layout"}),m=e("div",{class:"replay-arena"}),p=e("div",{});h.append(m,p),g(a,h),O(p);let o={gameId:t,round:0,agents:[],currentChallenge:null,spectatorCount:0};function c(){let y=[],E=e("div",{class:"replay-controls"}),S=e("button",{class:"btn btn-primary",type:"button"},i?"\u23F8 Pause":"\u25B6 Play");S.addEventListener("click",()=>{i?b():w()});let L=[1,2,5].map(R=>{let $=e("button",{class:`btn btn-speed${l===R?" active":""}`,type:"button"},`${R}x`);return $.addEventListener("click",()=>{l=R,c()}),$}),G=e("button",{class:"btn btn-secondary",type:"button"},"\u23EE Restart");G.addEventListener("click",()=>{b(),n=0,r(),c()}),E.append(S,...L,G),y.push(E);let de=n/Math.max(s.length-1,1),_=e("div",{class:"scrubber-track"}),j=e("div",{class:"scrubber-fill"});if(j.style.width=`${de*100}%`,_.append(j),_.addEventListener("click",R=>{let $=_.getBoundingClientRect(),k=(R.clientX-$.left)/$.width;n=Math.floor(k*s.length),v(n),c()}),y.push(_),y.push(e("p",{class:"replay-info"},`Event ${n+1} / ${s.length} | Round ${o.round} | Speed: ${l}x`)),n<s.length){let R=s[n],$=e("div",{class:"replay-event"},e("span",{class:"event-type"},R.eventType));if(R.eventType==="agent:response"){let k=R.data;$.append(e("p",{class:"agent-name"},String(k.agentId??"")),e("p",{class:"response-text"},String(k.response??"").slice(0,300)),e("p",{class:"response-score"},`Score: ${k.score??0}`))}if(R.eventType==="game:end"){let k=R.data;$.append(e("h2",{},"\u{1F3C6} Game Over!"),e("p",{class:"winner-name"},String(k.winner?.name??"Unknown")))}y.push($)}let M=e("button",{class:"btn btn-secondary",type:"button"},"\u{1F517} Copy Replay Link");M.addEventListener("click",()=>{let R=`${location.origin}/#/replay/${encodeURIComponent(t)}`;navigator.clipboard.writeText(R).then(()=>{M.textContent="\u2705 Copied!",setTimeout(()=>{M.textContent="\u{1F517} Copy Replay Link"},2e3)})}),y.push(M),g(m,...y)}function r(){o.round=0,o.agents=[],o.currentChallenge=null,f.update({gameState:{...o}})}function u(y){let E=y.data;switch(y.eventType){case"game:start":{let S=E;o.agents=(S.agents??[]).map(L=>({...L,avatarSeed:L.avatarSeed??""}));break}case"round:start":o.round=E.round??o.round+1,o.currentChallenge=null;break;case"challenge:start":{let S=E.challenge;o.currentChallenge={type:S?.type??"unknown",description:S?.publicDescription??"",responses:[]};break}case"agent:response":{let S=E;o.currentChallenge&&(o.currentChallenge.responses||(o.currentChallenge.responses=[]),o.currentChallenge.responses.push({agentDisplayId:String(S.agentId??""),response:String(S.response??""),score:Number(S.score??0)}));let L=o.agents.find(G=>G.displayId===S.agentId);L&&(L.score+=Number(S.score??0));break}case"elimination":{let S=E,L=o.agents.find(G=>G.displayId===S.agentId);L&&(L.eliminated=!0);break}}f.update({gameState:{...o}})}function v(y){r();for(let E=0;E<=Math.min(y,s.length-1);E++)u(s[E])}function w(){i=!0,c(),T()}function b(){i=!1,d&&(clearTimeout(d),d=null),c()}function T(){if(!i||n>=s.length-1){i=!1,c();return}let y=Math.max(200/l,50);d=setTimeout(()=>{n++,u(s[n]),c(),T()},y)}K(t).then(y=>{s=y.events,s.length>0&&u(s[0]),c()}).catch(()=>{g(m,e("p",{class:"error"},"Failed to load replay"))})}var me=["\u{1F947}","\u{1F948}","\u{1F949}"];function oe(a){let t=[],s=0,n=20;function i(){let d=[];d.push(e("h1",{class:"leaderboard-title"},"\u{1F3C6} Leaderboard"));let h=e("div",{class:"leaderboard-table",role:"table","aria-label":"Agent leaderboard"}),m=e("div",{class:"leaderboard-row header",role:"row"},e("span",{class:"lb-rank",role:"columnheader"},"Rank"),e("span",{class:"lb-name",role:"columnheader"},"Agent"),e("span",{class:"lb-elo",role:"columnheader"},"ELO"),e("span",{class:"lb-winrate",role:"columnheader"},"Win Rate"),e("span",{class:"lb-games",role:"columnheader"},"Games"));h.append(m),t.forEach((o,c)=>{let r=s+c+1,u=r<=3?me[r-1]:String(r),v=o.total_games>0?`${Math.round(o.total_wins/o.total_games*100)}%`:"\u2014",w=r<=3?` top-${r}`:"",b=e("div",{class:`leaderboard-row${w}`,role:"row"},e("span",{class:"lb-rank",role:"cell"},u),e("span",{class:"lb-name",role:"cell"},o.name),e("span",{class:"lb-elo",role:"cell"},String(Math.round(o.elo_rating))),e("span",{class:"lb-winrate",role:"cell"},v),e("span",{class:"lb-games",role:"cell"},String(o.total_games)));h.append(b)}),d.push(h);let p=e("div",{class:"pagination"});if(s>0){let o=e("button",{class:"btn btn-secondary",type:"button"},"\u2190 Previous");o.addEventListener("click",()=>{s=Math.max(0,s-n),l()}),p.append(o)}if(t.length===n){let o=e("button",{class:"btn btn-secondary",type:"button"},"Next \u2192");o.addEventListener("click",()=>{s+=n,l()}),p.append(o)}d.push(p),g(a,...d)}function l(){g(a,e("p",{},"Loading leaderboard\u2026")),X(n,s).then(d=>{t=d.entries,i()}).catch(()=>{g(a,e("p",{class:"error"},"Failed to load leaderboard"))})}l()}function ie(a,t){g(a,e("p",{},"Loading profile\u2026")),Q(t).then(s=>{let n=[];n.push(e("h1",{},s.displayName)),n.push(e("p",{class:"profile-joined"},`Joined: ${new Date(s.joinedAt*1e3).toLocaleDateString()}`));let i=e("div",{class:"profile-stats"},e("div",{class:"stat"},e("span",{class:"stat-value"},String(s.stats.totalGames)),e("span",{class:"stat-label"},"Games")),e("div",{class:"stat"},e("span",{class:"stat-value"},String(s.stats.wins)),e("span",{class:"stat-label"},"Wins")),e("div",{class:"stat"},e("span",{class:"stat-value"},`${s.stats.winRate}%`),e("span",{class:"stat-label"},"Win Rate")));if(n.push(i),s.agents.length>0){n.push(e("h2",{},"Agents"));let l=e("div",{class:"agent-grid"});for(let d of s.agents)l.append(e("div",{class:"agent-card"},e("span",{class:"agent-name"},d.name),e("span",{class:"agent-stats"},`${d.play_count} games, ${d.win_count} wins`)));n.push(l)}if(s.recentGames.length>0){n.push(e("h2",{},"Recent Games"));let l=e("div",{class:"game-history",role:"list"});for(let d of s.recentGames){let h=d.placement?`#${d.placement}`:"\u2014";l.append(e("div",{class:"game-history-item",role:"listitem"},e("span",{},`Game ${d.game_id.slice(0,8)}`),e("span",{},`Placement: ${h}`),e("span",{},d.status)))}n.push(l)}g(a,...n)}).catch(()=>{g(a,e("p",{class:"error"},"Failed to load profile"))})}function le(a){let t=[],s="",n="newest",i,l=0,d=20;function h(){let p=[];p.push(e("h1",{},"\u{1F916} Browse Agents"));let o=e("div",{class:"agent-browser-controls"}),c=e("input",{type:"text",class:"search-input",placeholder:"Search agents\u2026","aria-label":"Search agents"});c.value=s,c.addEventListener("input",()=>{s=c.value,l=0,m()});let r=e("select",{class:"sort-select","aria-label":"Sort agents"});for(let[b,T]of[["newest","Newest"],["popular","Most Popular"],["winrate","Best Win Rate"]]){let y=e("option",{value:b},T);b===n&&(y.selected=!0),r.append(y)}r.addEventListener("change",()=>{n=r.value,l=0,m()});let u=e("button",{class:`btn btn-filter${i==="true"?" active":""}`,type:"button"},"Presets Only");u.addEventListener("click",()=>{i=i==="true"?void 0:"true",l=0,m()}),o.append(c,r,u),p.push(o);let v=e("div",{class:"agent-grid"});for(let b of t){let T=b.playCount&&b.playCount>0?`${Math.round((b.winCount??0)/b.playCount*100)}%`:"\u2014",y=e("div",{class:"agent-card"},e("h3",{class:"agent-name"},b.name),e("div",{class:"agent-meta"},e("span",{},`${b.playCount??0} games`),e("span",{},`Win rate: ${T}`)));v.append(y)}p.push(v);let w=e("div",{class:"pagination"});if(l>0){let b=e("button",{class:"btn btn-secondary",type:"button"},"\u2190 Previous");b.addEventListener("click",()=>{l=Math.max(0,l-d),m()}),w.append(b)}if(t.length===d){let b=e("button",{class:"btn btn-secondary",type:"button"},"Next \u2192");b.addEventListener("click",()=>{l+=d,m()}),w.append(b)}p.push(w),g(a,...p)}function m(){Z({search:s,sort:n,preset:i,limit:d,offset:l}).then(p=>{t=p.agents,h()}).catch(()=>{g(a,e("p",{class:"error"},"Failed to load agents"))})}m()}function ce(a){let t=[],s="",n=0,i=20;function l(){let h=[];h.push(e("h1",{},"\u{1F3AE} Game Lobby"));let m=e("div",{class:"lobby-filters"});for(let[c,r]of[["","All"],["running","\u{1F7E2} Live"],["completed","\u2705 Completed"],["pending","\u23F3 Pending"]]){let u=e("button",{class:`btn btn-filter${s===c?" active":""}`,type:"button"},r);u.addEventListener("click",()=>{s=c,n=0,d()}),m.append(u)}h.push(m);let p=e("div",{class:"game-list",role:"list"});for(let c of t){let r=c.status==="running"?"\u{1F7E2}":c.status==="completed"?"\u2705":"\u23F3",u=c.status==="running"?"Watch Live":c.status==="completed"?"Watch Replay":"View",v=c.status==="completed"?`#/replay/${c.id}`:`#/game/${c.id}`,w=e("a",{class:"btn btn-primary btn-sm",href:v},u),b=e("div",{class:"game-card",role:"listitem"},e("div",{class:"game-info"},e("span",{class:"game-status"},`${r} ${c.status}`),e("span",{class:"game-mode"},c.mode),e("span",{class:"game-date"},new Date(c.created_at*1e3).toLocaleString())),w);p.append(b)}t.length===0&&p.append(e("p",{class:"empty"},"No games found")),h.push(p);let o=e("div",{class:"pagination"});if(n>0){let c=e("button",{class:"btn btn-secondary",type:"button"},"\u2190 Previous");c.addEventListener("click",()=>{n=Math.max(0,n-i),d()}),o.append(c)}if(t.length===i){let c=e("button",{class:"btn btn-secondary",type:"button"},"Next \u2192");c.addEventListener("click",()=>{n+=i,d()}),o.append(c)}h.push(o),g(a,...h)}function d(){g(a,e("p",{},"Loading games\u2026")),ee({status:s||void 0,limit:i,offset:n}).then(h=>{t=h.games,l()}).catch(()=>{g(a,e("p",{class:"error"},"Failed to load games"))})}d()}var x=document.getElementById("app"),C=new U;C.add("/",()=>{f.update({route:"#/"}),W(x,()=>{location.hash="#/pick"})});C.add("/pick",()=>{f.update({route:"#/pick"}),te(x)});C.add("/game/:id",a=>{let t=a.id;t&&(f.update({route:`#/game/${t}`}),N(x,"Loading game\u2026"),q(t).then(s=>{s.status==="completed"?V(t).then(n=>{let i=e("section",{class:"game-results"},e("h1",{},"\u{1F3C6} Game Over"),e("p",{},`Status: ${n.status}`));n.winner&&i.append(e("p",{class:"winner-name"},`Winner: ${n.winner}`));let l=e("a",{class:"btn btn-primary",href:`#/replay/${t}`},"\u{1F4F9} Watch Replay");i.append(l),g(x,i)}).catch(n=>{P(x,n.message,()=>C.resolve())}):ae(x,t)}).catch(s=>{P(x,s.message,()=>C.resolve())}))});C.add("/replay/:id",a=>{let t=a.id;t&&(f.update({route:`#/replay/${t}`}),re(x,t))});C.add("/leaderboard",()=>{f.update({route:"#/leaderboard"}),oe(x)});C.add("/profile/:id",a=>{let t=a.id;t&&(f.update({route:`#/profile/${t}`}),ie(x,t))});C.add("/agents",()=>{f.update({route:"#/agents"}),le(x)});C.add("/lobby",()=>{f.update({route:"#/lobby"}),ce(x)});C.start();
